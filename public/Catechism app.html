<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Illumined: Catholic Faith Formation App</title>
    <style>
        /* Global Styles */
       :root {
  --primary-color: white;       /* Deep red */
  --secondary-color: #f7f7f5;     /* Gold */
  --accent-color: #bf944a;        /* Use gold as your hover/highlight tone */
  --text-color: black;          /* Soft light text for dark background */
  --background-color: transparent;    /* Deep black/brown background */
  --background-gradient: radial-gradient(50% 104%, #f7f7f5	 46%, #110f0f 100%);
  --font-family: 'Georgia', serif;
  --shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  --border-radius: 8px;
  --transition: all 0.3s ease;
}

.button-theme {
  background: var(--primary-color);
  color: var(--text-color);
  padding: 0.75rem 1.25rem;
  border: none;
  border-radius: var(--border-radius);
  box-shadow: var(--shadow);
  cursor: pointer;
  transition: var(--transition);
  font-size: 1rem;
}

        body {
            margin: 0;
            padding: 0;
            font-family: var(--font-family);
            color: var(--text-color);
            background: var(--background-gradient);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden;
            text-shadow: 1px 1px 4px #000; /* Added back from previous working code */
        }
        
        /* Header */
        header {
            background: var(--secondary-color-gradient);
            padding: 1rem;
            text-align: center;
            font-size: 3rem;
            text-shadow: 5px 5px 2px rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius); /* Added back from previous working code */
            margin-bottom: 1rem; /* Added back from previous working code */
        }

        /* Navigation Bar */
         nav {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    gap: 1rem 2rem; /* vertical and horizontal gap */
    padding: 1rem 2rem;
    background-color: #3b6fa0	; /* subtle background for visibility */
    border-radius: 0.5rem;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}
     nav button {
    background: var(--primary-color);
    color: var(--text-color);
    border: none;
    padding: 0.75rem 1.75rem;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    cursor: pointer;
    transition: background 0.3s ease, transform 0.2s ease;
    font-size: 1rem;
    font-weight: 600;
    min-width: 140px;
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    outline: none;
}

nav button:hover {
    background: var(--primary-color-hover, #0056b3); /* fallback if not set */
    transform: translateY(-2px);
}

nav button:active {
    transform: scale(0.97);
}

nav button:focus-visible {
    outline: 2px solid var(--focus-color, #ffc107);
    outline-offset: 3px;
}


       /* Main Content Container */
.main-content-container {
    position: relative;
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    padding: 0; /* Remove horizontal padding */
    max-width: 800px;
    width: 100%;
    margin: 2rem auto 0 auto; /* ADD margin-top and set others */
    opacity: 1;
    transition: opacity 0.6s ease-in-out;
    background-color: transparent !important; /* Remove background */
    border-radius: 0.75rem;
    box-shadow: none; /* Remove shadow */
    box-sizing: border-box;
}

/* Section Cards inside the Main Content */
.main-content-container section {
    width: 100%;
    max-width: 800px;
    margin: 1rem auto; /* Standardized vertical margin */
    padding: 1.5rem;   /* Standardized padding */
    background: var(--secondary-color, #c9a518);
    border-radius: var(--border-radius, 0.75rem);
    box-shadow: var(--shadow, 0 4px 8px rgba(0, 0, 0, 0.1));
    text-align: center;
    font-size: 1.1rem;
    line-height: 1.6;
    color: black;
    text-shadow: none;
    box-sizing: border-box;
    transition: transform 0.3s ease, opacity 0.3s ease;
}

/* Hide Section Smoothly */
.main-content-container section.hidden {
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    display: none !important; /* This is the key change */
    overflow: hidden;
    margin: 0;
    padding: 0;
}

       /* Overlay Behind the Modal */
#alert-overlay {
    position: flex;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    display: none;
    z-index: 9999;
    pointer-events: auto;
}

#alert-overlay.active {
    display: block;
}
/* Modal Box */
#custom-alert-modal {
    position: fixed;
    top: 70%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.95);
    background: #ffffff; /* Solid white background */
    padding: 2rem;
    border-radius: 0.75rem;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2); /* Softer shadow */
    text-align: center;
    opacity: 0;
    transition: opacity 0.3s ease-out, transform 0.3s ease-out;
    z-index: 10000;
    max-width: 400px;
    width: 90%;
    color: #343a40; /* Darker text for readability */
    pointer-events: none; /* Change default to none */
    visibility: hidden; /* Add this */
    border: 1px solid #dee2e6; /* Subtle border */
}
/* Visible Modal */
#custom-alert-modal.visible {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
    animation: fadeIn 0.3s ease-out forwards;
    pointer-events: auto; /* Re-enable pointer events when visible */
    visibility: visible; /* Add this */
}

#custom-alert-modal.fade-out {
    animation: fadeOut 0.3s ease-out forwards;
}

        #alert-message {
            margin-bottom: 1.5rem; /* Adjusted margin */
            font-size: 1.1rem; /* Adjusted font-size */
            font-weight: 400; /* Adjusted font-weight */
            line-height: 1.5; /* Improved line spacing */
        }

        #alert-ok-button {
            background: #bf944a; /* Use theme color */
            color: blue;
            border: none;
            padding: 0.75rem 1.5rem; /* Adjusted padding */
            border-radius: 0.5rem; /* Adjusted border-radius */
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        #alert-ok-button:hover {
            background: gold; /* Darker red on hover */
            transform: translateY(-1px);
        }
          #custom-alert-modal.hidden {
            display: none;
        }

        /* Section Specific Styles */
        #main-menu-section {
            text-align: center;
        }

        /* Lesson List Section */
#lessons-list-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.75rem;
    padding: 1.5rem;
}
#lessons-list-section button {
      background: var(--primary-color);
            color: var(--text-color);
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
            min-width: 150px;
            margin: 0.5rem;
        }
#lessons-list-section button.category-button:hover,
#lessons-list-section button.lesson-button:hover {
  transform: translateY(-2px);
  background: var(--accent-color, #c3a009);
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
}

/* Style for the container holding the lesson buttons */
#lessons-container {
    display: flex;
    flex-wrap: wrap; /* Allow buttons to wrap to the next line */
    justify-content: center; /* Center the buttons */
    gap: 0.75rem; /* Add space between buttons */
    padding: 1rem 0; /* Add some vertical padding */
}

/* Lesson Content Wrapper */
#lesson-content-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  background-color: #ffffff;
  border-radius: 1rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
  max-width: 900px;
  margin: 2rem auto;
  box-sizing: border-box;
}

/* Individual Lesson Content */
#current-lesson-content {
  width: 100%;
  max-width: 700px;
  margin: 1rem 0;
  text-align: justify;
  line-height: 1.6;
  color: var(--text-color, #1f2937);
  font-size: 1rem;
}


/* Embedded Video Style */
.video-placeholder {
    width: 100%;
    max-width: 700px;
    aspect-ratio: 16 / 9;
    margin: 1.5rem 0;
    background-color: transparent;
    border: none;
    overflow: hidden;
}

.video-placeholder iframe {
    width: 100%;
    height: 100%;
    border: none;
}

/* Quiz Section */
#quiz-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
}

#quiz-questions-container {
    width: 90%;
    max-width: 700px;
    margin: 1rem 0;
}

/* Quiz Option Styling */
#quiz-questions-container label {
    display: flex;
    align-items: center;
    margin: 0.5rem 0;
    border-radius: 8px;
    background: #f5f5f5;
    cursor: pointer;
    transition: background 0.2s ease;
}

#quiz-questions-container label:hover {
    background: #e0e0e0;
}

#quiz-questions-container input[type="radio"] {
    margin-right: 0.75rem;
}

/* Content Page Styling (for Examination, Works of Mercy, etc.) */
.content-page {
    text-align: left; /* Align text to the left for readability */
    background: #f9f9f9; /* A slightly off-white background */
    color: #333;
    line-height: 1.7;
}

.content-page .content-wrapper {
    padding: 0 1rem; /* Add some horizontal padding */
}

.content-page h3 {
    font-size: 1.5rem;
    color: #6A0505; /* A deep red for main headings */
    border-bottom: 2px solid #e0e0e0;
    padding-bottom: 0.5rem;
    margin-top: 1.5rem;
    margin-bottom: 1rem;
}

.content-page h4 {
    font-size: 1.25rem;
    color: #333;
    margin-top: 1.2rem;
    margin-bottom: 0.8rem;
}

.content-page h5 {
    font-size: 1.1rem;
    color: #6A0505;
    margin-top: 1.5rem;
    margin-bottom: 0.5rem;
    font-weight: bold;
}

.content-page p {
    margin-bottom: 1rem;
}

.content-page ul, .content-page ol {
    padding-left: 25px; /* Proper indentation for lists */
    margin-bottom: 1rem;
}

.content-page li {
    margin-bottom: 0.5rem;
}

.content-page li strong {
    color: #3b6fa0; /* Use a theme color for emphasis */
}

.content-page blockquote {
    border-left: 4px solid var(--accent-color, #bf944a);
    margin: 1.5rem 0;
    padding: 0.5rem 1rem;
    background-color: #ffffff;
    font-style: italic;
    color: #555;
    border-radius: 0 4px 4px 0;
}

.content-page em {
    color: #555;
    font-style: italic;
}

        #spiritual-formation-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    width: 100%;
    max-width: 700px;
    margin: 0 auto;
}

#spiritual-formation-section button {
      background: var(--primary-color);
            color: var(--text-color);
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
            min-width: 150px;
            margin: 0.5rem;
        }

#spiritual-formation-section button:hover {
    transform: translateY(-2px);
    background: var(--accent-color);
}

        #rosary-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    background: #D4AF37; /* Rich gold */
    color: #333;
    text-align: center;
    padding: 2rem 1.5rem;
    min-height: 300px;
    width: 100%;
    box-sizing: border-box;
}

#rosary-section h2 {
    font-size: 2rem;
    margin-bottom: 1rem;
    color: #6A0505;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.15);
}

#rosary-section p {
    font-size: 1.1rem;
    line-height: 1.75;
    margin-bottom: 0.75rem;
    max-width: 700px;
}

#rosary-section button {
    background: #8B4513;
    color: white;
    font-size: 1.1rem;
    border: none;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    margin: 0.5rem;
    transition: background 0.3s ease, transform 0.2s ease;
    cursor: pointer;
}

#rosary-section button:hover {
    background: #5f5429;
    transform: translateY(-2px);
}


/* Chat Section Container */
#chat-section {
    font-family: 'Inter', sans-serif;
    background-color: transparent;
    display: flex;
    justify-content: center;
    align-items: center;
    box-sizing: border-box;
    width: 100%;
}

/* Chat Card */
#chat-section .chat-container {
    background-color: #ffffff;
    border-radius: 1rem;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    width: 100%;
    max-width: 42rem;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    border: 1px solid #e0e0e0;
}

/* Chat Header */
#chat-section .chat-header {
  background: var(--primary-color, #6d1718);
  color: #fff;
  text-align: center;
  padding: 1.25rem 1.5rem;
  font-size: 1.3rem;
  font-weight: bold;
  border-top-left-radius: 1.25rem;
  border-top-right-radius: 1.25rem;
  position: relative;
}

/* Messages Area */
#chat-section .messages-area {
     flex-grow: 1;
    padding: 1.5rem;
    overflow-y: auto;
    max-height: 28rem;
    min-height: 10rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    background-color: #f9fafb;
    border-bottom: 1px solid #e0e0e0;
}

/* Input Area */
#chat-section .input-area {
  display: flex;
  gap: 0.75rem;
  background: #fff;
  padding: 1rem 1.5rem;
  border-bottom-left-radius: 1.25rem;
  border-bottom-right-radius: 1.25rem;
  box-shadow: 0 -2px 8px rgba(0,0,0,0.04);
}

/* Responsive */
@media (max-width: 600px) {
  #chat-section .chat-container {
    max-width: 98vw;
    border-radius: 0.75rem;
  }
  #chat-section .chat-header,
  #chat-section .input-area {
    border-radius: 0.75rem 0.75rem 0 0;
  }
}
/* Profile Setup */
#profile-setup {
  display: flex;
  flex-direction: column;
  align-items: center;
  border-radius: 0.5rem;
  text-align: center;
  font-size: 1.1rem;
  color: #333;
  border: none;
}

#profile-setup.hidden {
  display: none;
}

#profile-setup input {
  margin: 0.5rem 0;
  padding: 0.6rem;
  width: 100%;
  max-width: 300px;
  border-radius: 0.5rem;
  border: 1px solid #cbd5e0;
  font-size: 1rem;
  box-sizing: border-box;
  color: #333
}

* Style for placeholder text */
#profile-setup input::placeholder {
  color: #9ca3af;
}

#profile-setup button {
  background: var(--primary-color);
  color: var(--text-color);
  padding: 0.75rem 1.5rem;
  border-radius: var(--border-radius);
  cursor: pointer;
  border: none;
  font-weight: 600;
  margin-top: 1rem;
  box-shadow: var(--shadow);
  transition: var(--transition);
}

#profile-setup button:hover {
  background: #5f5429;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}


/* Message Bubbles */
#chat-section .message-bubble {
max-width: 85%;
    padding: 0.75rem 1rem;
    border-radius: 1rem;
    word-wrap: break-word;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

#chat-section .message-bubble.sent {
    background-color: #dbeafe;
    align-self: flex-end;
    color: #1e40af;
}

#chat-section .message-bubble.received {
   background-color: #f3f4f6;
    align-self: flex-start;
    color: #374151;
}
#chat-section .message-sender {
      font-size: 0.75rem;
    font-weight: 600;
    margin-bottom: 0.25rem;
    color: #6b7280;
}

#chat-section .input-area input {
  padding: 1.5rem;
    background-color: #ffffff;
}

#chat-section .input-area input:focus {
     border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25);
}

/* Send Button */
#chat-section .input-area button {
   background-color: #3b82f6;
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 0.75rem;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.2s, box-shadow 0.2s;
    border: none;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

#chat-section .input-area button:hover {
    background-color: #2563eb;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

/* Optional Loading State */
#chat-section .loading-message {
  text-align: center;
  padding: 2rem;
  color: #6b7280;
}


        #student-resources-section {
            text-align: center;
        }
        #student-resources-section button { /* Consistent button styling */
            background: var(--primary-color);
            color: var(--text-color);
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
            min-width: 150px;
            margin: 0.5rem;
        }
        #student-resources-section button:hover {
            transform: translateY(-2px);
            background: var(--accent-color);
        }

        /* Responsiveness */
        @media (max-width: 768px) {
            nav {
                flex-direction: column;
            }

            nav button {
                width: 100%;
            }

            .main-content-container section {
                padding: 0.5rem;
            }
        }

/* Force chat section and chat card to use white background and dark text */
.main-content-container section#chat-section {
  background: transparent !important;
  color: #222 !important;
  box-shadow: none !important;
  padding: 0;
}

#chat-section .chat-container {
  background: #fff !important;
  color: #222 !important;
  box-shadow: 0 8px 32px rgba(0,0,0,0.12) !important;
  border-radius: 1.25rem !important;
  border: 1px solid #e0e0e0 !important;
}
/* Optional: Custom Fade Out Animation */

@keyframes fadeIn {
    from { opacity: 0; transform: translate(-50%, -60%); }
    to { opacity: 1; transform: translate(-50%, -50%); }
}
@keyframes fadeOut {
    from { opacity: 1; transform: translate(-50%, -50%); }
    to { opacity: 0; transform: translate(-50%, -60%); }
}
    </style>
</head>
<body>

    <!-- Header -->
    <header>ILLUMINED</header>

    <!-- Navigation Bar -->
    <nav>
        <button id="home-nav-button">Home</button>
        <button id="lessons-nav-button">Lessons & Quizzes</button>
        <button id="spiritual-nav-button">Spiritual Formation</button>
        <button id="chat-menu-button">Chat</button>
        <button id="resources-nav-button">Student Resources</button>
        <button id="quit-nav-button">Quit</button>
    </nav>

    <!-- Main Content Container -->
    <div class="main-content-container">
        <!-- Home Section -->
        <section id="main-menu-section">
            <h2>Welcome to Illumined!</h2>
            <p>Use the navigation bar to explore lessons, spiritual exercises, and more.</p>
        </section>

        <!-- Lessons List Section -->
      <section id="lessons-list-section" class="hidden">
    <h2>Lessons Categories</h2>
    <div id="categories-container">
        <button class="button-theme category-button">The Profession of Faith</button>
        <button class="button-theme category-button">The Celebration of the Christian Mysteries</button>
        <button class="button-theme category-button">Life in Christ</button>
        <button class="button-theme category-button">Christian Prayer</button>
    </div>
    <div id="lessons-container" style="display: none;"></div>
<button class="button-theme" id="back-to-categories-button" style="display: none;">Back to Categories</button>
</section>

        <!-- Lesson Content Section -->
        <section id="lesson-content-section" class="hidden">
            <h2 id="current-lesson-title"></h2>
            <div id="current-lesson-content"></div>
            <div class="video-placeholder" id="lesson-video-container" style="display: none;">
                <iframe id="lesson-video" width="560" height="315" frameborder="0" allowfullscreen></iframe>
            </div>
            <button class="button-theme" id="take-quiz-button">Take Quiz</button>
            <button class="button-theme" id="back-to-lessons-list-button">Back to Lessons</button>
        </section>

        <!-- Quiz Section -->
        <section id="quiz-section" class="hidden">
            <h2 id="quiz-title"></h2>
            <div id="quiz-questions-container"></div>
            <button class="button-theme" id="submit-quiz-button">Submit Quiz</button>
            <button class="button-theme" id="back-to-lesson-from-quiz-button">Back to Lesson</button>
        </section>

<!-- Spiritual Formation Section -->
        <section id="spiritual-formation-section" class="hidden">
            <h2>Spiritual Formation</h2>
            <div id="spiritual-container">
                <button class="button-theme" id="prayers-menu-button">Prayers</button>
                <button class="button-theme" id="examination-menu-button">Examination of Conscience</button>
                <button class="button-theme" id="practices-menu-button">Spiritual Practices</button>
                <button class="button-theme" id="spiritual-main-menu-button">Back to Main Menu</button>
            </div>
        </section>

        <!-- Prayers Section -->
        <section id="prayer-section" class="hidden">
            <button class="button-theme" id="common-prayers-button">Common Prayers</button>
            <button class="button-theme" id="guided-rosary-button">Guided Rosary</button>
            <button class="button-theme" id="lectio-divina-button">Lectio Divina</button>
            <button class="button-theme" id="liturgy-hours-button">Liturgy of the Hours</button>
            <button class="button-theme" id="prayers-back-to-spiritual-button">Back to Spiritual Formation</button>
        </section>

        <!-- Examination of Conscience Section (Placeholder) -->
   <section id="examination-section" class="hidden content-page">
            <h2>Examination of Conscience</h2>
            <div class="content-wrapper">
                <p>This section will guide you through a prayerful review of your day.</p>
                <h3>I. What is an Examination of Conscience?</h3>
                <p>An <strong>examination of conscience</strong> is a prayerful self-reflection on our thoughts, words, deeds, and omissions, measured against God’s commandments and the teaching of the Church. Its purpose is to:</p>
                <ul>
            <li><strong>Recognize</strong> sins and faults honestly.</li>
            <li><strong>Acknowledge</strong> God’s mercy and our need for repentance.</li>
            <li><strong>Prepare</strong> the soul to make a good Confession.</li>
            <li><strong>Form</strong> the conscience over time to be more sensitive to sin and more responsive to grace.</li>
        </ul>
        <blockquote>
            “Examine yourselves, to see whether you are holding to your faith. Test yourselves.” — 2 Corinthians 13:5<br>
            “Search me, O God, and know my heart! Try me and know my thoughts!” — Psalm 139:23
        </blockquote>

        <h3>II. Why is it Important?</h3>
        <ul>
            <li><strong>For Confession</strong> — A good confession requires that we know and confess our mortal sins by kind and number, and it is helped by remembering venial sins as well.</li>
            <li><strong>For Growth in Holiness</strong> — Even outside of Confession, regular examination fosters humility, self-awareness, and a desire for virtue.</li>
            <li><strong>To Form the Conscience</strong> — By examining our lives in light of the Gospel, our conscience becomes better aligned with God’s will.</li>
        </ul>

        <h3>III. When and How Often?</h3>
        <ul>
            <li><strong>Before Confession</strong> — A thorough examination should be done before every sacramental confession.</li>
            <li><strong>Daily (Brief)</strong> — A short version at the end of the day, sometimes called an <em>examen</em>.</li>
            <li><strong>Retreats or Spiritual Checkpoints</strong> — A deeper examination before retreats, spiritual direction, or big life decisions.</li>
        </ul>

        <h3>IV. Dispositions for a Good Examination</h3>
        <ul>
            <li><strong>Prayerful Attitude</strong> — Begin with prayer, asking the Holy Spirit for light and honesty.</li>
            <li><strong>Honesty</strong> — Avoid self-justification. Call sins what they are.</li>
            <li><strong>Hope in God’s Mercy</strong> — Avoid despair; focus on Christ’s saving love.</li>
            <li><strong>Resolve to Amend</strong> — A sincere desire to avoid sin and its occasions.</li>
        </ul>

        <h3>V. Step-by-Step Guide</h3>
        <h4>Step 1: Pray for Light</h4>
        <p>Ask the Holy Spirit to help you see yourself as God sees you.<br>
        <em>"Lord, help me to see my sins clearly and to know Your infinite mercy."</em></p>

        <h4>Step 2: Review Your Life</h4>
        <p>Use a framework such as:</p>
        <ul>
            <li>The Ten Commandments</li>
            <li>The Precepts of the Church</li>
            <li>The Beatitudes</li>
            <li>The Seven Deadly Sins</li>
            <li>Your State in Life Duties</li>
        </ul>

        <h4>Examination by the Ten Commandments</h4>

        <h5>1. I am the Lord your God; you shall not have strange gods before Me.</h5>
        <ul>
            <li>Have I loved God above all things?</li>
            <li>Have I trusted in superstition, astrology, occult practices?</li>
            <li>Have I been faithful in prayer?</li>
            <li>Have I made idols of money, pleasure, or success?</li>
        </ul>

        <h5>2. You shall not take the name of the Lord your God in vain.</h5>
        <ul>
            <li>Have I used God’s name disrespectfully or in anger?</li>
            <li>Have I spoken irreverently of holy things?</li>
            <li>Have I broken vows or promises made to God?</li>
        </ul>

        <h5>3. Remember to keep holy the Lord’s Day.</h5>
        <ul>
            <li>Have I missed Mass on Sundays or Holy Days without serious reason?</li>
            <li>Have I been inattentive or distracted at Mass?</li>
            <li>Have I done unnecessary work instead of resting in God?</li>
        </ul>

        <h5>4. Honor your father and your mother.</h5>
        <ul>
            <li>Have I disrespected or disobeyed my parents?</li>
            <li>As a parent, have I failed to guide my children toward God?</li>
            <li>Have I failed in obedience to lawful authority?</li>
        </ul>

        <h5>5. You shall not kill.</h5>
        <ul>
            <li>Have I harbored hatred, resentment, or revenge?</li>
            <li>Have I injured someone physically or spiritually?</li>
            <li>Have I been reckless with my health or others’?</li>
            <li>Have I supported abortion, euthanasia, or assisted suicide?</li>
            <li>Have I engaged in gossip or detraction?</li>
        </ul>

        <h5>6. You shall not commit adultery.</h5>
        <ul>
            <li>Have I engaged in sexual activity outside marriage?</li>
            <li>Have I viewed pornography or entertained lustful thoughts?</li>
            <li>Have I been faithful to my spouse in thought and action?</li>
            <li>Have I respected the dignity of my own body and others’?</li>
        </ul>

        <h5>7. You shall not steal.</h5>
        <ul>
            <li>Have I taken what is not mine?</li>
            <li>Have I cheated in business, school, or games?</li>
            <li>Have I wasted time or resources?</li>
            <li>Have I failed in generosity?</li>
        </ul>

        <h5>8. You shall not bear false witness.</h5>
        <ul>
            <li>Have I lied or been deceitful?</li>
            <li>Have I spoken falsely about others?</li>
            <li>Have I withheld the truth when obligated to speak?</li>
        </ul>

        <h5>9. You shall not covet your neighbor’s wife.</h5>
        <ul>
            <li>Have I been envious of another’s spouse or relationship?</li>
            <li>Have I entertained impure desires?</li>
        </ul>

        <h5>10. You shall not covet your neighbor’s goods.</h5>
        <ul>
            <li>Have I been jealous of what others have?</li>
            <li>Have I been greedy or discontent?</li>
            <li>Have I trusted in possessions rather than God?</li>
        </ul>

        <h4>Step 3: Acknowledge Sins and Their Gravity</h4>
        <p><strong>Mortal Sin</strong> — Grave matter, full knowledge, and deliberate consent (CCC 1857–1859). Must be confessed in kind and number.<br>
        <strong>Venial Sin</strong> — Lesser matter or without full consent. Still worth confessing for spiritual growth.</p>

        <h4>Step 4: Make an Act of Contrition</h4>
        <p><em>O my God, I am heartily sorry for having offended You, and I detest all my sins because of Your just punishments, but most of all because they offend You, my God, who are all-good and deserving of all my love. I firmly resolve, with the help of Your grace, to sin no more and to avoid the near occasions of sin. Amen.</em></p>

        <h3>VI. Tips for a Fruitful Examination</h3>
        <ul>
            <li>Keep a spiritual journal to note recurring sins and patterns.</li>
            <li>Regularly read Scripture and the Catechism to form your conscience.</li>
            <li>Ask a trusted confessor for guidance.</li>
            <li>Let the examination lead to gratitude for God’s mercy, not scrupulosity.</li>
        </ul>

        <h3>VII. Quick Daily Mini-Examen (5 minutes)</h3>
        <ol>
            <li>Place yourself in God’s presence.</li>
            <li>Thank Him for the day’s blessings.</li>
            <li>Ask the Holy Spirit for light.</li>
            <li>Review the day briefly — thoughts, words, deeds, omissions.</li>
            <li>Express sorrow, make a resolution, and pray an Act of Contrition.</li>
        </ol>
    </div>
    <button class="button-theme" id="examination-back-to-spiritual-button">Back to Spiritual Formation</button>
</section>


          <!-- Spiritual Practices Section (Placeholder) -->
        <section id="practices-section" class="hidden">
            <h2>Spiritual Practices</h2>
            <p>Discover various spiritual practices to deepen your faith life.</p>
            <button class="button-theme" id="works-of-mercy-button">Works of Mercy</button>
            <button class="button-theme" id="precepts-of-church-button">Precepts of the Church</button>
            <button class="button-theme" id="penitential-practices-button">Penitential Practices</button>
            <button class="button-theme" id="habit-building-button">Habit Building</button>
            <button class="button-theme" id="social-teachings-button">Social Teachings in Action</button>
            <button class="button-theme" id="liturgical-living-button">Liturgical & Sacramental Living</button>
            <button class="button-theme" id="practices-back-to-spiritual-button">Back to Spiritual Formation</button>
        </section>

        <!-- Rosary Mysteries Selection Section -->
        <section id="rosary-mysteries-section" class="hidden">
            <h2>Choose a Mystery</h2>
            <button class="button-theme" id="joyful-mysteries-button">Joyful Mysteries</button>
            <button class="button-theme" id="luminous-mysteries-button">Luminous Mysteries</button>
            <button class="button-theme" id="sorrowful-mysteries-button">Sorrowful Mysteries</button>
            <button class="button-theme" id="glorious-mysteries-button">Glorious Mysteries</button>
            <button class="button-theme" id="mysteries-back-to-spiritual-button">Back to Spiritual Formation</button>
        </section>

        <!-- Rosary Section -->
        <section id="rosary-section" class="hidden">
            <h2 id="current-mystery-title"></h2>
            <p id="current-scripture"></p>
            <p id="current-prayer-text"></p>
            <button class="button-theme" id="rosary-next-button">Next Prayer</button>
            <button class="button-theme" id="rosary-reset-button">Reset Rosary</button>
            <button class="button-theme" id="rosary-back-to-mysteries-button">Back to Mysteries</button>
        </section>

        <!-- Works of Mercy Section -->
        <section id="works-of-mercy-section" class="hidden content-page">
            <h2>The Works of Mercy</h2>
            <div class="content-wrapper">
                <p>The Works of Mercy are charitable actions by which we come to the aid of our neighbor in their bodily and spiritual needs. Rooted in Scripture and Tradition, they are concrete ways to live out Christ’s command to love God and love our neighbor (cf. Matthew 25:31–46, Galatians 6:1–2).</p>
                <h3>Corporal Works of Mercy</h3>
                <ul>
                    <li>Feed the hungry</li>
                    <li>Give drink to the thirsty</li>
                    <li>Clothe the naked</li>
                    <li>Shelter the homeless</li>
                    <li>Visit the sick</li>
                    <li>Visit the imprisoned</li>
                    <li>Bury the dead</li>
                </ul>
                <h3>Spiritual Works of Mercy</h3>
                <ul>
                    <li>Instruct the ignorant</li>
                    <li>Counsel the doubtful</li>
                    <li>Admonish the sinner</li>
                    <li>Bear wrongs patiently</li>
                    <li>Forgive offenses willingly</li>
                    <li>Comfort the afflicted</li>
                    <li>Pray for the living and the dead</li>
                </ul>
            </div>
            <button class="button-theme" id="mercy-back-to-practices-button">Back to Spiritual Practices</button>
        </section>


        <!-- Precepts of the Church Section -->
        <section id="precepts-of-church-section" class="hidden content-page">
    <h2>The Precepts of the Catholic Church</h2>
    <p>The five precepts of the Catholic Church are guidelines that outline the minimum requirements for Catholics to remain in good standing with God and the Church. They help ensure that the faithful grow in love for God, neighbor, and the Body of Christ (cf. Catechism of the Catholic Church 2041–2043).</p>
                
    <div class="content-wrapper">
        <ol>
            <li><strong>Attend Mass on Sundays and Holy Days of Obligation</strong> – Participate in the Eucharist and refrain from unnecessary servile work on these days.</li>
            <li><strong>Confess your sins at least once a year</strong> – Receive the Sacrament of Reconciliation to be reconciled with God and the Church.</li>
            <li><strong>Receive the Eucharist at least during the Easter season</strong> – Share in the Paschal mystery by receiving Christ’s Body and Blood.</li>
            <li><strong>Observe the days of fasting and abstinence established by the Church</strong> – Unite yourself with Christ’s sacrifice through penance and self-denial.</li>
            <li><strong>Help to provide for the needs of the Church</strong> – Support the Church’s mission through your time, talents, and financial contributions.</li>
        </ol>
    </div>

    <button class="button-theme" id="precepts-back-to-practices-button">Back to Spiritual Practices</button>
</section>


        <!-- Penitential Practices Section -->
      <section id="penitential-practices-section" class="hidden content-page">
    <h2>Penitential Practices</h2>
    <p>Penitential practices are voluntary acts of self-denial, prayer, and charity that help us grow in holiness, unite ourselves to the sufferings of Christ, and repair the damage caused by sin. They express conversion of heart and deepen our love for God and neighbor (cf. Catechism of the Catholic Church 1434–1439).</p>
                
    <div class="content-wrapper">
        <ol>
            <li><strong>Fasting</strong> – Reducing the amount of food consumed as a form of prayer and sacrifice, especially on days appointed by the Church.</li>
            <li><strong>Abstinence</strong> – Refraining from certain foods (traditionally meat) as an act of penance and solidarity with the poor.</li>
            <li><strong>Almsgiving</strong> – Giving to those in need, supporting charitable causes, and practicing generosity as a remedy for selfishness.</li>
            <li><strong>Prayer</strong> – Setting aside extra time for prayer, devotions, or meditation to draw closer to God.</li>
            <li><strong>Acts of Self-Denial</strong> – Voluntarily giving up comforts, pleasures, or entertainment to grow in virtue and discipline.</li>
            <li><strong>Reconciliation</strong> – Regularly receiving the Sacrament of Penance to be cleansed from sin and strengthened against temptation.</li>
            <li><strong>Works of Mercy</strong> – Performing corporal and spiritual acts of service as a concrete expression of repentance and love.</li>
        </ol>
    </div>

    <button class="button-theme" id="penitential-back-to-practices-button">Back to Spiritual Practices</button>
</section>


        <!-- Habit Building Section -->
        <section id="habit-building-section" class="hidden content-page">
            <h2>Virtue-Building Habits</h2>
    <p>Virtue-building habits are intentional daily practices that help form the mind, heart, and will to live in greater conformity with Christ. By cultivating these habits, we grow in the theological and moral virtues, resist sin, and bear witness to the Gospel in our daily lives.</p>
                
    <div class="content-wrapper">
        <ol>
            <li><strong>Daily Prayer</strong> – Setting aside dedicated time each day for personal and communal prayer to deepen one’s relationship with God.</li>
            <li><strong>Daily Scripture Reading</strong> – Reading and meditating on the Word of God to be nourished by truth and guided by divine wisdom.</li>
            <li><strong>Frequent Reception of the Sacraments</strong> – Regular participation in the Eucharist and Reconciliation to receive grace and spiritual strength.</li>
            <li><strong>Acts of Kindness</strong> – Performing intentional good deeds for others to grow in charity and compassion.</li>
            <li><strong>Fasting from Distractions</strong> – Limiting entertainment, technology, or other distractions to create more space for God.</li>
            <li><strong>Silence and Reflection</strong> – Setting aside quiet time to listen to God, examine one’s conscience, and discern His will.</li>
            <li><strong>Spiritual Reading</strong> – Studying the lives of saints, Church teaching, and theological works to inspire and form the soul.</li>
        </ol>
    </div>

    <button class="button-theme" id="virtue-back-to-practices-button">Back to Spiritual Practices</button>
</section>


        <!-- Social Teachings Section -->
        <section id="social-teachings-section" class="hidden content-page">
            <h2>Catholic Social Teaching in Action</h2>
    <p>Catholic Social Teaching applies the Gospel to the social, political, and economic realities of our time. These principles guide us to respect human dignity, promote the common good, and work for justice and peace in the world (cf. Compendium of the Social Doctrine of the Church).</p>
                
    <div class="content-wrapper">
        <ol>
            <li><strong>Respect for Human Life</strong> – Defending the dignity of every person from conception to natural death through pro-life witness and advocacy.</li>
            <li><strong>Care for Creation</strong> – Practicing environmental stewardship and using resources responsibly in light of God’s creation mandate.</li>
            <li><strong>Preferential Option for the Poor</strong> – Serving and advocating for those in poverty or marginalized in society.</li>
            <li><strong>Solidarity</strong> – Standing with others, especially the vulnerable, in a spirit of unity and shared responsibility.</li>
            <li><strong>Promotion of Peace</strong> – Working to resolve conflicts, promote reconciliation, and foster harmony between peoples.</li>
            <li><strong>Economic Justice</strong> – Supporting fair wages, ethical business practices, and economic systems that respect human dignity.</li>
            <li><strong>Participation in Public Life</strong> – Engaging in civic duties, informed voting, and community service in light of Catholic values.</li>
        </ol>
    </div>

    <button class="button-theme" id="social-back-to-practices-button">Back to Spiritual Practices</button>
</section>

        <!-- Liturgical Living Section -->
        <section id="liturgical-living-section" class="hidden content-page">
         <h2>Liturgical Living</h2>
    <p>Liturgical living is the practice of ordering daily life around the rhythms and seasons of the Church’s liturgy. By observing feasts, fasts, and devotions, Catholics allow the worship of God to shape their time, habits, and home life, making the liturgical year a living expression of faith.</p>
                
    <div class="content-wrapper">
        <ol>
            <li><strong>Observing the Liturgical Year</strong> – Celebrating seasons like Advent, Christmas, Lent, Easter, and Ordinary Time with their unique prayers and traditions.</li>
            <li><strong>Honoring Feast Days</strong> – Marking solemnities and memorials of Christ, Our Lady, and the saints through prayer, special meals, or devotions.</li>
            <li><strong>Keeping Days of Fasting and Abstinence</strong> – Participating in the Church’s penitential days to unite with Christ’s sacrifice.</li>
            <li><strong>Using Sacramentals</strong> – Incorporating blessed objects such as holy water, medals, scapulars, and crucifixes into daily life as reminders of God’s grace.</li>
            <li><strong>Praying the Liturgy of the Hours</strong> – Joining the universal prayer of the Church throughout the day.</li>
            <li><strong>Family and Home Devotions</strong> – Creating a domestic church with practices like a home altar, family rosary, and seasonal decorations.</li>
            <li><strong>Blessing Meals and Milestones</strong> – Offering prayers of gratitude before eating and marking life events with the Church’s blessings.</li>
        </ol>
    </div>

    <button class="button-theme" id="liturgical-back-to-practices-button">Back to Spiritual Practices</button>
</section>
                 
        <!-- Chat Section -->
 <section id="chat-section" class="hidden">
            <div class="chat-container">
                <div class="chat-header" id="chat-header">Chat</div>
                <div class="messages-area" id="messages-area"></div>
                <div class="input-area" id="message-input-area">
                    <input id="message-input" type="text" placeholder="Type your message...">
                    <button class="button-theme" id="send-button">Send</button>
                </div>
                <button class="button-theme" id="close-chat-button">Close</button>
            </div>
        </section>

        <!-- Profile Setup Section (Moved from Chat) -->
        <section id="profile-setup" class="hidden">
            <p>Please create a profile to use the chat and track your progress.</p>
            <input id="username-input" type="text" placeholder="Enter Username">
            <input id="class-input" type="text" placeholder="Enter Class ID (e.g., OCIA 1)">
            <button class="button-theme" id="save-profile-button">Save Profile</button>
        </section>
            

        <!-- Student Resources Section -->
        <section id="student-resources-section" class="hidden">
            <h2>Student Resources</h2>
            <p>Access helpful resources for your faith journey.</p>
            <button class="button-theme" onclick="window.open('https://bible.usccb.org/bible/readings/072525.cfm/', '_blank')">Holy Bible</button>
            <button class="button-theme" onclick="window.open('https://usccb.cld.bz/Catechism-of-the-Catholic-Church/', '_blank')">Catechism of the Catholic Church</button>
            <button class="button-theme" onclick="window.open('https://www.catholic.com/', '_blank')">Catholic Answers</button>
            <button class="button-theme" onclick="window.open('https://www.ibreviary.com/m2/breviario.php/', '_blank')">ibreviary</button>
            <button class="button-theme" onclick="window.open('https://media.ascensionpress.com/category/ascension-podcasts/catechisminayear/', '_blank')">The Catechism in a Year(with Fr. Mike Schmitz)</button>

        </section>
    </div>

    <!-- Custom Alert Modal -->
    <div id="alert-overlay"></div>
    <div id="custom-alert-modal">
        <p id="alert-message"></p>
        <button id="alert-ok-button">OK</button>
    </div>
    <div id="alert-overlay" class="hidden"></div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/11.1.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.1.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore-compat.js"></script>

    <script>
        // Firebase Initialization
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {
            // Fallback config if undefined
            apiKey: "AIzaSyA7B17UFVuvxOUmK81MCkSwwTzXiXeySlk",
            authDomain: "ocia-application.firebaseapp.com",
            projectId: "ocia-application",
            storageBucket: "ocia-application.firebasestorage.app",
            messagingSenderId: "113168534647",
            appId: "1:113168534647:web:ac363f4f89185b6ac88a72",
            measurementId: "G-WRGSXQCY5D"
        };
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore(app);
        const auth = firebase.auth(app);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;


        // Global Variables
        let currentUser = null;
        let userProfile = null;
        let currentCategory = null;
        let currentLesson = null;
        let currentQuiz = null;

        // Sample Lessons Data (Dynamically generated categories)
        const lessonsData = [
            {
                category: "The Profession of Faith",
                lessons: [
                    {
                        id: "foundations-1",
                        title: "What is Faith?",
                        content: "",
                        videoUrl: "https://www.youtube.com/embed/dQw4w9WgXcQ", // Example video
                        quiz: {
                            question: "What is faith?",
                            options: ["Assurance of things hoped for", "Seeing is believing", "A leap in the dark"],
                            correct: 0
                        }
                    },
                    {
                        id: "foundations-2",
                        title: "Divine Revelation",
                        content: "Christianity rests upon the conviction that we can come to know the mystery of God. God invites us to encounter him personally by the grace of faith. He has revealed himself in Jesus Christ, as Father, Son and Holy Spirit, the one God and Creator of all that is. In revealing himself, God also communicates to human beings the offer of life with him. “That which was from the beginning, which we have heard, which we have seen with our eyes, which we have looked upon and touched with our hands, concerning the word of life—the life was made manifest, and we saw it, and testify to it, and proclaim to you the eternal life which was with the Father and was made manifest to us” (1 Jn 1:1–2). A dimension of this is intellectual. God’s activity of self-manifestation occurs through the prophetic and apostolic teaching of the Old and New Testaments, all of which culminates in the person of Jesus Christ, the Incarnate God. ",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                        {
                        id: "foundations-3",
                        title: "Sacred Scripture",
                        content: "The Holy Bible is the inspired Word of God. It contains the innerent testament of God's dealing with man and reveals to man his ultimate purpose and destiny.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                        {
                        id: "foundations-4",
                        title: "Sacred Tradition",
                        content: "God has entrusted the authentic intrepretation of His revelation to his Church. This authentic and true intrepretation of Sacred Scripture is what we call Sacred Tradition. It was taught to the Apostles by Jesus Christ and is preserved by the Bishops.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                    {
                        id: "foundations-5",
                        title: "Creeds and Councils",
                        content: "The Creed summarizes the Christian faith. It serves as a indespensible tool ",
                        videoUrl: null,
                        quiz: {
                            question: "How many Sacraments are there in the Catholic Church?",
                            options: ["Three", "Five", "Seven", "Ten"],
                            correct: 2
                        }
                    },
                        {
                        id: "foundations-6",
                        title: "God the Father, Creator",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                        {
                        id: "foundations-7",
                        title: "The Blessed Trinity",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                        {
                        id: "foundations-8",
                        title: "God the Son, Jesus Christ",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                        {
                        id: "foundations-9",
                        title: "The Incarnation",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                    {
                        id: "foundations-10",
                        title: "Life, Death, & Resurrection of Jesus Christ",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                    {
                        id: "foundations-11",
                        title: "Ascension of Jesus Christ",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                    {
                        id: "foundations-12",
                        title: "God the Holy Spirit",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                    {
                        id: "foundations-13",
                        title: "Creation",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                    {
                        id: "foundations-14",
                        title: "Mankind and the Human Person",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                    {
                        id: "foundations-15",
                        title: "Fall & Sin",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                    {
                        id: "foundations-16",
                        title: "Savlation History",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                    {
                        id: "foundations-17",
                        title: "Paschal Mystery",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                    {
                        id: "foundations-18",
                        title: "The Church: The Body of Christ",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                    {
                        id: "foundations-19",
                        title: "The Four Marks",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                    {
                        id: "foundations-20",
                        title: "The Communion of the Saints",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                    {
                        id: "foundations-21",
                        title: "The Blessed Virgin Mary",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                    {
                        id: "foundations-22",
                        title: "Angels",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                    {
                        id: "foundations-23",
                        title: "The Last Four Things",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                    {
                        id: "foundations-24",
                        title: "The Church Militant, Suffering, & Triumphant",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                    {
                        id: "foundations-25",
                        title: "The Second Coming",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                    {
                        id: "foundation-26",
                        title: "Eternal Life",
                        content: "Our journey continues by focusing on God the Father, the Almighty Creator of heaven and earth. He is the source of all that exists, visible and invisible.",
                        videoUrl: null,
                        quiz: {
                            question: "Who is the ultimate Creator of heaven and earth?",
                            options: ["Humanity", "Nature", "God the Father", "The universe itself"],
                            correct: 2
                        }
                    },
                    
                ]
            },
            {
                category: "The Celebration of the Christian Mysteries",
                lessons: [
                
                    {
                        id: "sacraments-1",
                        title: "Baptism",
                        content: "In this lesson, we turn our hearts and minds to Jesus Christ, the Son of God, and our Savior. He is the central figure of our faith, through whom God revealed Himself most fully to humanity.",
                        videoUrl: "https://www.youtube.com/embed/3vuYCjfO_w4",
                        quiz: {
                            question: "What is the central event of Jesus Christ's life that is the cornerstone of Christian faith?",
                            options: ["His birth in Bethlehem", "His miracles", "His Resurrection", "His teachings"],
                            correct: 2
                        }
                    },
                    {
                        id: "sacraments-2",
                        title: "Confirmation",
                        content: "The Holy Spirit, the third Person of the Holy Trinity, is God's active presence in the world and in our lives. He is the Giver of Life, inspiring the prophets, empowering Jesus, and guiding the Church.",
                        videoUrl: null,
                        quiz: {
                            question: "What event marked the descent of the Holy Spirit upon the Apostles?",
                            options: ["The Annunciation", "The Nativity", "Pentecost", "The Ascension"],
                            correct: 2
                        }
                    },
                                        {
                        id: "sacraments-3",
                        title: "The Holy Eucharist",
                        content: "The Holy Spirit, the third Person of the Holy Trinity, is God's active presence in the world and in our lives. He is the Giver of Life, inspiring the prophets, empowering Jesus, and guiding the Church.",
                        videoUrl: null,
                        quiz: {
                            question: "What event marked the descent of the Holy Spirit upon the Apostles?",
                            options: ["The Annunciation", "The Nativity", "Pentecost", "The Ascension"],
                            correct: 2
                        }
                    },
                                        {
                        id: "sacraments-4",
                        title: "Holy Orders",
                        content: "The Holy Spirit, the third Person of the Holy Trinity, is God's active presence in the world and in our lives. He is the Giver of Life, inspiring the prophets, empowering Jesus, and guiding the Church.",
                        videoUrl: null,
                        quiz: {
                            question: "What event marked the descent of the Holy Spirit upon the Apostles?",
                            options: ["The Annunciation", "The Nativity", "Pentecost", "The Ascension"],
                            correct: 2
                        }
                    },
                                        {
                        id: "sacraments-5",
                        title: "Holy Matrimony",
                        content: "The Holy Spirit, the third Person of the Holy Trinity, is God's active presence in the world and in our lives. He is the Giver of Life, inspiring the prophets, empowering Jesus, and guiding the Church.",
                        videoUrl: null,
                        quiz: {
                            question: "What event marked the descent of the Holy Spirit upon the Apostles?",
                            options: ["The Annunciation", "The Nativity", "Pentecost", "The Ascension"],
                            correct: 2
                        }
                    },
                                        {
                        id: "sacraments-6",
                        title: "Reconcilation",
                        content: "The Holy Spirit, the third Person of the Holy Trinity, is God's active presence in the world and in our lives. He is the Giver of Life, inspiring the prophets, empowering Jesus, and guiding the Church.",
                        videoUrl: null,
                        quiz: {
                            question: "What event marked the descent of the Holy Spirit upon the Apostles?",
                            options: ["The Annunciation", "The Nativity", "Pentecost", "The Ascension"],
                            correct: 2
                        }
                    },
                                        {
                        id: "sacraments-7",
                        title: "Anointing of the Sick",
                        content: "The Holy Spirit, the third Person of the Holy Trinity, is God's active presence in the world and in our lives. He is the Giver of Life, inspiring the prophets, empowering Jesus, and guiding the Church.",
                        videoUrl: null,
                        quiz: {
                            question: "What event marked the descent of the Holy Spirit upon the Apostles?",
                            options: ["The Annunciation", "The Nativity", "Pentecost", "The Ascension"],
                            correct: 2
                        }
                    },
                                        {
                        id: "sacraments-8",
                        title: "Liturgy",
                        content: "The Holy Spirit, the third Person of the Holy Trinity, is God's active presence in the world and in our lives. He is the Giver of Life, inspiring the prophets, empowering Jesus, and guiding the Church.",
                        videoUrl: null,
                        quiz: {
                            question: "What event marked the descent of the Holy Spirit upon the Apostles?",
                            options: ["The Annunciation", "The Nativity", "Pentecost", "The Ascension"],
                            correct: 2
                        }
                    },
                                        {
                        id: "sacraments-9",
                        title: "The Mass",
                        content: "The Holy Spirit, the third Person of the Holy Trinity, is God's active presence in the world and in our lives. He is the Giver of Life, inspiring the prophets, empowering Jesus, and guiding the Church.",
                        videoUrl: null,
                        quiz: {
                            question: "What event marked the descent of the Holy Spirit upon the Apostles?",
                            options: ["The Annunciation", "The Nativity", "Pentecost", "The Ascension"],
                            correct: 2
                        }
                    },
                                        {
                        id: "sacraments-10",
                        title: "Sacramental Economy",
                        content: "The Holy Spirit, the third Person of the Holy Trinity, is God's active presence in the world and in our lives. He is the Giver of Life, inspiring the prophets, empowering Jesus, and guiding the Church.",
                        videoUrl: null,
                        quiz: {
                            question: "What event marked the descent of the Holy Spirit upon the Apostles?",
                            options: ["The Annunciation", "The Nativity", "Pentecost", "The Ascension"],
                            correct: 2
                        }
                    },
                                        {
                        id: "sacraments-11",
                        title: "Sacramentals",
                        content: "The Holy Spirit, the third Person of the Holy Trinity, is God's active presence in the world and in our lives. He is the Giver of Life, inspiring the prophets, empowering Jesus, and guiding the Church.",
                        videoUrl: null,
                        quiz: {
                            question: "What event marked the descent of the Holy Spirit upon the Apostles?",
                            options: ["The Annunciation", "The Nativity", "Pentecost", "The Ascension"],
                            correct: 2
                        }
                    },
                ]
            },
            {
                category: "Life in Christ",
                lessons: [
                    {
                        id: "morals-1",
                        title: "What is Morality",
                        content: "The Church is the Body of Christ, a community of believers called by God to continue His mission on earth. It is 'catholic,' meaning universal, embracing all people in all times and places.",
                        videoUrl: null,
                        quiz: {
                            question: "What does 'catholic' mean in reference to the Church?",
                            options: ["Strict and rigid", "Universal", "Small and exclusive", "Ancient and traditional"],
                            correct: 1
                        }
                    },
                      {
                        id: "morals-2",
                        title: "Human Dignity",
                        content: "The Church is the Body of Christ, a community of believers called by God to continue His mission on earth. It is 'catholic,' meaning universal, embracing all people in all times and places.",
                        videoUrl: null,
                        quiz: {
                            question: "What does 'catholic' mean in reference to the Church?",
                            options: ["Strict and rigid", "Universal", "Small and exclusive", "Ancient and traditional"],
                            correct: 1
                        }
                    },
                      {
                        id: "morals-3",
                        title: "Freedom and Choice",
                        content: "The Church is the Body of Christ, a community of believers called by God to continue His mission on earth. It is 'catholic,' meaning universal, embracing all people in all times and places.",
                        videoUrl: null,
                        quiz: {
                            question: "What does 'catholic' mean in reference to the Church?",
                            options: ["Strict and rigid", "Universal", "Small and exclusive", "Ancient and traditional"],
                            correct: 1
                        }
                    },
                      {
                        id: "morals-4",
                        title: "Natural Law",
                        content: "The Church is the Body of Christ, a community of believers called by God to continue His mission on earth. It is 'catholic,' meaning universal, embracing all people in all times and places.",
                        videoUrl: null,
                        quiz: {
                            question: "What does 'catholic' mean in reference to the Church?",
                            options: ["Strict and rigid", "Universal", "Small and exclusive", "Ancient and traditional"],
                            correct: 1
                        }
                    },
                      {
                        id: "morals-5",
                        title: "The Ten Commandments",
                        content: "The Church is the Body of Christ, a community of believers called by God to continue His mission on earth. It is 'catholic,' meaning universal, embracing all people in all times and places.",
                        videoUrl: null,
                        quiz: {
                            question: "What does 'catholic' mean in reference to the Church?",
                            options: ["Strict and rigid", "Universal", "Small and exclusive", "Ancient and traditional"],
                            correct: 1
                        }
                    },
                      {
                        id: "morals-6",
                        title: "Commandments 1-3",
                        content: "The Church is the Body of Christ, a community of believers called by God to continue His mission on earth. It is 'catholic,' meaning universal, embracing all people in all times and places.",
                        videoUrl: null,
                        quiz: {
                            question: "What does 'catholic' mean in reference to the Church?",
                            options: ["Strict and rigid", "Universal", "Small and exclusive", "Ancient and traditional"],
                            correct: 1
                        }
                    },
                      {
                        id: "morals-7",
                        title: "Commandments 4-10",
                        content: "The Church is the Body of Christ, a community of believers called by God to continue His mission on earth. It is 'catholic,' meaning universal, embracing all people in all times and places.",
                        videoUrl: null,
                        quiz: {
                            question: "What does 'catholic' mean in reference to the Church?",
                            options: ["Strict and rigid", "Universal", "Small and exclusive", "Ancient and traditional"],
                            correct: 1
                        }
                    },
                      {
                        id: "morals-8",
                        title: "Freedom in Christ",
                        content: "The Church is the Body of Christ, a community of believers called by God to continue His mission on earth. It is 'catholic,' meaning universal, embracing all people in all times and places.",
                        videoUrl: null,
                        quiz: {
                            question: "What does 'catholic' mean in reference to the Church?",
                            options: ["Strict and rigid", "Universal", "Small and exclusive", "Ancient and traditional"],
                            correct: 1
                        }
                    },
                      {
                        id: "morals-9",
                        title: "Grace, Justification, & Merit",
                        content: "The Church is the Body of Christ, a community of believers called by God to continue His mission on earth. It is 'catholic,' meaning universal, embracing all people in all times and places.",
                        videoUrl: null,
                        quiz: {
                            question: "What does 'catholic' mean in reference to the Church?",
                            options: ["Strict and rigid", "Universal", "Small and exclusive", "Ancient and traditional"],
                            correct: 1
                        }
                    },
                      {
                        id: "morals-10",
                        title: "Virtue & Vice",
                        content: "The Church is the Body of Christ, a community of believers called by God to continue His mission on earth. It is 'catholic,' meaning universal, embracing all people in all times and places.",
                        videoUrl: null,
                        quiz: {
                            question: "What does 'catholic' mean in reference to the Church?",
                            options: ["Strict and rigid", "Universal", "Small and exclusive", "Ancient and traditional"],
                            correct: 1
                        }
                    },
                      {
                        id: "morals-11",
                        title: "Habit",
                        content: "The Church is the Body of Christ, a community of believers called by God to continue His mission on earth. It is 'catholic,' meaning universal, embracing all people in all times and places.",
                        videoUrl: null,
                        quiz: {
                            question: "What does 'catholic' mean in reference to the Church?",
                            options: ["Strict and rigid", "Universal", "Small and exclusive", "Ancient and traditional"],
                            correct: 1
                        }
                    },
                      {
                        id: "morals-12",
                        title: "Faith",
                        content: "The Church is the Body of Christ, a community of believers called by God to continue His mission on earth. It is 'catholic,' meaning universal, embracing all people in all times and places.",
                        videoUrl: null,
                        quiz: {
                            question: "What does 'catholic' mean in reference to the Church?",
                            options: ["Strict and rigid", "Universal", "Small and exclusive", "Ancient and traditional"],
                            correct: 1
                        }
                    },
                      {
                        id: "morals-13",
                        title: "Hope",
                        content: "The Church is the Body of Christ, a community of believers called by God to continue His mission on earth. It is 'catholic,' meaning universal, embracing all people in all times and places.",
                        videoUrl: null,
                        quiz: {
                            question: "What does 'catholic' mean in reference to the Church?",
                            options: ["Strict and rigid", "Universal", "Small and exclusive", "Ancient and traditional"],
                            correct: 1
                        }
                    },
                      {
                        id: "morals-14",
                        title: "Charity",
                        content: "The Church is the Body of Christ, a community of believers called by God to continue His mission on earth. It is 'catholic,' meaning universal, embracing all people in all times and places.",
                        videoUrl: null,
                        quiz: {
                            question: "What does 'catholic' mean in reference to the Church?",
                            options: ["Strict and rigid", "Universal", "Small and exclusive", "Ancient and traditional"],
                            correct: 1
                        }
                    },
                      {
                        id: "morals-15",
                        title: "The Cardinal Virtues",
                        content: "The Church is the Body of Christ, a community of believers called by God to continue His mission on earth. It is 'catholic,' meaning universal, embracing all people in all times and places.",
                        videoUrl: null,
                        quiz: {
                            question: "What does 'catholic' mean in reference to the Church?",
                            options: ["Strict and rigid", "Universal", "Small and exclusive", "Ancient and traditional"],
                            correct: 1
                        }
                    },
                      {
                        id: "morals-16",
                        title: "Mortal and Venial Sin (Capital and Lesser Sins)",
                        content: "The Church is the Body of Christ, a community of believers called by God to continue His mission on earth. It is 'catholic,' meaning universal, embracing all people in all times and places.",
                        videoUrl: null,
                        quiz: {
                            question: "What does 'catholic' mean in reference to the Church?",
                            options: ["Strict and rigid", "Universal", "Small and exclusive", "Ancient and traditional"],
                            correct: 1
                        }
                    },
                      {
                        id: "morals-17",
                        title: "Catholic Social Teaching",
                        content: "The Church is the Body of Christ, a community of believers called by God to continue His mission on earth. It is 'catholic,' meaning universal, embracing all people in all times and places.",
                        videoUrl: null,
                        quiz: {
                            question: "What does 'catholic' mean in reference to the Church?",
                            options: ["Strict and rigid", "Universal", "Small and exclusive", "Ancient and traditional"],
                            correct: 1
                        }
                    },
                      {
                        id: "morals-18",
                        title: "Mercy and Justice",
                        content: "The Church is the Body of Christ, a community of believers called by God to continue His mission on earth. It is 'catholic,' meaning universal, embracing all people in all times and places.",
                        videoUrl: null,
                        quiz: {
                            question: "What does 'catholic' mean in reference to the Church?",
                            options: ["Strict and rigid", "Universal", "Small and exclusive", "Ancient and traditional"],
                            correct: 1
                        }
                    },
                ]
            },
            {
                category: "Christian Prayer",
                lessons: [
                    {
                        id: "prayer-1",
                        title: "Introduction to Prayer",
                        content: "The Sacraments are outward signs instituted by Christ to give grace. They are powerful encounters with God's saving presence, making visible the invisible reality of His love and mercy.",
                        videoUrl: null,
                        quiz: {
                            question: "How many Sacraments are there in the Catholic Church?",
                            options: ["Three", "Five", "Seven", "Ten"],
                            correct: 2
                        }
                    },
                    {
                        id: "prayer-2",
                        title: "The Lord's Prayer - Our Model",
                        content: "The Sacraments are outward signs instituted by Christ to give grace. They are powerful encounters with God's saving presence, making visible the invisible reality of His love and mercy.",
                        videoUrl: null,
                        quiz: {
                            question: "How many Sacraments are there in the Catholic Church?",
                            options: ["Three", "Five", "Seven", "Ten"],
                            correct: 2
                        }
                    },
                    {
                        id: "prayer-3",
                        title: "Traditions and Types of Prayer",
                        content: "The Sacraments are outward signs instituted by Christ to give grace. They are powerful encounters with God's saving presence, making visible the invisible reality of His love and mercy.",
                        videoUrl: null,
                        quiz: {
                            question: "How many Sacraments are there in the Catholic Church?",
                            options: ["Three", "Five", "Seven", "Ten"],
                            correct: 2
                        }
                    },
                    {
                        id: "prayer-4",
                        title: "The Prayer of the Mass",
                        content: "The Sacraments are outward signs instituted by Christ to give grace. They are powerful encounters with God's saving presence, making visible the invisible reality of His love and mercy.",
                        videoUrl: null,
                        quiz: {
                            question: "How many Sacraments are there in the Catholic Church?",
                            options: ["Three", "Five", "Seven", "Ten"],
                            correct: 2
                        }
                    },
                    {
                        id: "prayer-5",
                        title: "Prayer Without Ceasing",
                        content: "The Sacraments are outward signs instituted by Christ to give grace. They are powerful encounters with God's saving presence, making visible the invisible reality of His love and mercy.",
                        videoUrl: null,
                        quiz: {
                            question: "How many Sacraments are there in the Catholic Church?",
                            options: ["Three", "Five", "Seven", "Ten"],
                            correct: 2
                        }
                    },
                ]
            },
            ];


        // Rosary Prayers Constants
        const SIGN_OF_THE_CROSS = "In the name of the Father, and of the Son, and of the Holy Spirit. Amen.";
        const APOSTLES_CREED = "I believe in God, the Father almighty, Creator of heaven and earth, and in Jesus Christ, his only Son, our Lord, who was conceived by the Holy Spirit, born by the Virgin Mary, suffered under Pontius Pilate, was crucified, died and was buried; he descended into hell; on the third day he rose again from the dead; he ascended into heaven, and is seated at the right hand of God the Father almighty; from there he will come to judge the living and the dead. I believe in the Holy Spirit, the holy catholic Church, the communion of saints, the forgiveness of sins, the resurrection of the body, and life everlasting. Amen.";
        const OUR_FATHER = "Our Father, who art in heaven, hallowed be thy name; thy kingdom come; thy will be done on earth as it is in heaven. Give us this day our daily bread; and forgive us our trespasses as we forgive those who trespass against us; and lead us not into temptation, but deliver us from evil. Amen.";
        const HAIL_MARY = "Hail Mary, full of grace, the Lord is with thee; blessed art thou among women, and blessed is the fruit of thy womb, Jesus. Holy Mary, Mother of God, pray for us sinners, now and at the hour of our death. Amen.";
        const GLORY_BE = "Glory be to the Father, and to the Son, and to the Holy Spirit. As it was in the beginning, is now, and ever shall be, world without end. Amen.";
        const FATIMA_PRAYER = "O my Jesus, forgive us our sins, save us from the fires of hell, and lead all souls to heaven, especially those most in need of thy mercy. Amen";
        const HAIL_HOLY_QUEEN = "Hail, Holy Queen, Mother of Mercy, our life, our sweetness and our hope. To thee do we cry, poor banished children of Eve. To thee do we send up our sighs, mourning and weeping in this valley of tears. Turn, most gracious advocate, thine eyes of mercy toward us, and after this, our exile, show unto us the blessed fruit of thy womb, Jesus. O clement, O loving, O sweet Virgin Mary. Pray for us, O holy Mother of God. That we may be made worthy of the promises of Christ.";

        // Joyful Mysteries
        const joyfulMysteries = [
            {
                title: "The Annunciation",
                scripture: "Luke 1:26-38\n\nIn the sixth month the angel Gabriel was sent from God to a city of Galilee named Nazareth, to a virgin betrothed to a man whose name was Joseph, of the house of David; and the virgin's name was Mary. And he came to her and said, “Hail, full of grace, the Lord is with you!” But she was greatly troubled at the saying, and considered in her mind what sort of greeting this might be. And the angel said to her, “Do not be afraid, Mary, for you have found favor with God. And behold, you will conceive in your womb and bear a son, and you shall call his name Jesus. He will be great, and will be called the Son of the Most High; and the Lord God will give to him the throne of his father David, and he will reign over the house of Jacob for ever; and of his kingdom there will be no end.” And Mary said to the angel, “How can this be, since I have no husband?” And the angel said to her, “The Holy Spirit will come upon you, and the power of the Most High will overshadow you; therefore the child to be born will be called holy, the Son of God. And behold, your kinswoman Elizabeth in her old age has also conceived a son; and this is the sixth month with her who was called barren. For with God nothing will be impossible.” And Mary said, “Behold, I am the handmaid of the Lord; let it be to me according to your word.” And the angel departed from her."},
            {
                title: "The Visitation",
                scripture: "Luke 1:39-56\n\nIn those days Mary arose and went with haste into the hill country, to a city of Judah, and she entered the house of Zechariah and greeted Elizabeth. And when Elizabeth heard the greeting of Mary, the babe leaped in her womb; and Elizabeth was filled with the Holy Spirit and she exclaimed with a loud cry, “Blessed are you among women, and blessed is the fruit of your womb! And why is this granted me, that the mother of my Lord should come to me? For behold, when the voice of your greeting came to my ears, the babe in my womb leaped for joy. And blessed is she who believed that there would be a fulfilment of what was spoken to her from the Lord.” And Mary said, “My soul magnifies the Lord, and my spirit rejoices in God my Savior, for he has regarded the low estate of his handmaiden. For behold, henceforth all generations will call me blessed; for he who is mighty has done great things for me, and holy is his name. And his mercy is on those who fear him"},
            {
                title: "The Nativity",
                scripture: "Luke 2:1-20\n\nIn those days a decree went out from Caesar Augustus that all the world should be enrolled. This was the first enrollment, when Quirin′ius was governor of Syria. And all went to be enrolled, each to his own city. And Joseph also went up from Galilee, from the city of Nazareth, to Judea, to the city of David, which is called Bethlehem, because he was of the house and lineage of David, to be enrolled with Mary, his betrothed, who was with child. And while they were there, the days were completed for her to be delivered. And she gave birth to her first-born son, and wrapped him in swaddling clothes, and laid him in a manger, because there was no place for them in the inn. And in that region there were shepherds out in the field, keeping watch over their flock by night. An angel of the Lord appeared to them, and the glory of the Lord shone around them, and they were greatly frightened. And the angel said to them, “Do not be afraid; for behold, I bring you good news of a great joy which will come to all the people; for to you is born this day in the city of David a Savior, who is Christ the Lord. And this will be a sign for you: you will find a babe wrapped in swaddling clothes and lying in a manger.” And suddenly there was with the angel a multitude of the heavenly host praising God and saying, “Glory to God in the highest, and on earth peace among men with whom he is pleased!” When the angels went away from them into heaven, the shepherds said to one another, “Let us go over to Bethlehem and see this thing that has happened, which the Lord has made known to us.” And they went with haste, and found Mary and Joseph, and the babe lying in a manger. And when they saw it, they made known the saying which had been told them concerning this child; and all who heard him wondered at what the shepherds told them. But Mary kept all these things, pondering them in her heart. And the shepherds returned, glorifying and praising God for all they had heard and seen, as it had been told them."},
            {
                title: "The Presentation",
                scripture: "Luke 2:22-38\n\nAnd when the time came for their purification according to the law of Moses, they brought him up to Jerusalem to present him to the Lord (as it is written in the law of the Lord, “Every male that opens the womb shall be called holy to the Lord”) and to offer a sacrifice according to what is said in the law of the Lord, “a pair of turtledoves, or two young pigeons.” Now there was a man in Jerusalem, whose name is Simeon, and this man was righteous and devout, looking for the consolation of Israel; and the Holy Spirit was upon him. And it had been revealed to him by the Holy Spirit that he should not see death before he had seen the Lord's Christ. And inspired by the Spirit he came into the temple; and when the parents brought in the child Jesus, to do for him according to the custom of the law, he took him up in his arms and blessed God and said, “Lord, now lettest thou thy servant depart in peace, according to thy word; for mine eyes have seen thy salvation which thou hast prepared in the presence of all peoples, a light for revelation to the Gentiles, and for glory to thy people Israel.” And there was a prophetess, Anna, the daughter of Phan′uel, of the tribe of Asher; she was of great age, having lived with her husband seven years from her virginity, and as a widow till she was eighty-four. She did not depart from the temple, worshiping with fasting and prayer night and day. And coming up at that very hour she gave thanks to God, and spoke of him to all who were looking for the redemption of Jerusalem."},
            {
                title: "The Finding in the Temple",
                scripture: "Luke 2:41-52\n\nNow his parents went to Jerusalem every year at the feast of the Passover. And when he was twelve years old, they went up according to custom; and when the feast was ended, as they were returning, the boy Jesus stayed behind in Jerusalem. His parents did not know it, but supposing him to be in the company they traveled a day's journey, and then sought him among their kinsfolk and acquaintances; and when they did not find him, they returned to Jerusalem, seeking him. After three days they found him in the temple, sitting among the teachers, listening to them and asking them questions; and all who heard him were amazed at his understanding and his answers. And when they saw him they were astonished; and his mother said to him, “Son, why have you treated us so? Behold, your father and I and I have been looking for you anxiously.” And he said to them, “How is it that you sought me? Did you not know that I must be in my Father's house?” And they did not understand the saying which he spoke to them. He went down with them and came to Nazareth, and was obedient to them; and his mother kept all these things in her heart. And Jesus increased in wisdom and in stature, and in favor with God and man."}
        ];
         // Luminous Mysteries
        const luminousMysteries = [
            { title: "The Baptism in the Jordan", scripture: "Matthew 3:13-17" },
            { title: "The Wedding at Cana", scripture: "John 2:1-11" },
            { title: "The Proclamation of the Kingdom", scripture: "Mark 1:14-15" },
            { title: "The Transfiguration", scripture: "Matthew 17:1-8" },
            { title: "The Institution of the Eucharist", scripture: "Matthew 26:26-30" }
        ];

        // Sorrowful Mysteries
        const sorrowfulMysteries = [
            { title: "The Agony in the Garden", scripture: "Matthew 26:36-46" },
            { title: "The Scourging at the Pillar", scripture: "John 19:1" },
            { title: "The Crowning with Thorns", scripture: "Matthew 27:27-31" },
            { title: "The Carrying of the Cross", scripture: "John 19:17" },
            { title: "The Crucifixion and Death", scripture: "John 19:18-30" }
        ];

        // Glorious Mysteries
        const gloriousMysteries = [
            { title: "The Resurrection", scripture: "John 20:1-9" },
            { title: "The Ascension", scripture: "Luke 24:50-53" },
            { title: "The Descent of the Holy Spirit", scripture: "Acts 2:1-4" },
            { title: "The Assumption of Mary", scripture: "Revelation 12:1" },
            { title: "The Coronation of Mary", scripture: "Revelation 12:1" }
        ];

        // Rosary State
           let rosaryState = {
            currentMysteries: [], // Will hold the selected set of mysteries
            currentMysteryIndex: 0,
            currentPrayerIndex: 0,
            prayers: [] // Will be populated per mystery
        };

        // Function to populate prayers for a mystery
        function getPrayersForMystery() {
            return [
                { type: 'Our Father', text: OUR_FATHER },
                ...Array(10).fill({ type: 'Hail Mary', text: HAIL_MARY }),
                { type: 'Glory Be', text: GLORY_BE },
                { type: 'Fatima Prayer', text: FATIMA_PRAYER }
            ];
        }

        // Custom Alert Function
        const customAlertModal = document.getElementById('custom-alert-modal');
        const alertMessageElement = document.getElementById('alert-message');
        const alertOkButton = document.getElementById('alert-ok-button');
        const alertOverlay = document.getElementById('alert-overlay');

        function showCustomAlert(message) {
            alertMessageElement.textContent = message;
            customAlertModal.classList.add('visible');
            alertOverlay.classList.add('active');
            // Make overlay clickable to close
            alertOverlay.style.pointerEvents = 'auto'; 
        }

        function hideCustomAlert() {
            customAlertModal.classList.remove('visible');
            alertOverlay.classList.remove('active');
            // Disable overlay clicks when hidden
            alertOverlay.style.pointerEvents = 'none'; 
        }

        alertOkButton.addEventListener('click', hideCustomAlert);
                alertOverlay.addEventListener('click', hideCustomAlert); 

        // Show Section Function
      function showSection(sectionId) {
            const sections = document.querySelectorAll('.main-content-container > section');
            sections.forEach(section => {
                if (section.id === sectionId) {
                    section.classList.remove('hidden');
                } else {
                    section.classList.add('hidden');
                }
            });
        }


        // Authentication
        async function initializeAuth() {
            try {
                if (initialAuthToken) {
                    await auth.signInWithCustomToken(initialAuthToken);
                } else {
                    await auth.signInAnonymously();
                }
            } catch (error) {
                console.error('Auth error:', error);
                showCustomAlert('Authentication failed. Please try again.');
            }
        }

        // Load User Profile
                 async function loadUserProfile() {
             try {
                const userDocRef = db.collection(`artifacts/${appId}/users`).doc(currentUser.uid);
                const doc = await userDocRef.get();
                if (doc.exists) {
                    userProfile = doc.data();
                    document.getElementById('chat-header').textContent = `Welcome, ${userProfile.username}! (Class: ${userProfile.classId})`;
                    document.getElementById('message-input').disabled = false;
                    document.getElementById('send-button').disabled = false;
                    document.getElementById('message-input-area').style.pointerEvents = 'auto';
                    setupChatListener(); 
                } else {
                    // If no profile, do nothing on load.
                    // The check will be handled by the chat button's event listener.
                    userProfile = null;
                    document.getElementById('message-input').disabled = true; 
                    document.getElementById('send-button').disabled = true; 
                }
            } catch (error) {
                console.error('Profile load error:', error);
                showCustomAlert('Failed to load profile.');
            }
        }
        // Save Profile
        async function saveProfile() {
            const username = document.getElementById('username-input').value.trim();
            const classId = document.getElementById('class-input').value.trim();
            if (!username || !classId) {
                showCustomAlert('Please enter both username and class ID.');
                return;
            }
            try {
                const profileData = {
                    username,
                    classId,
                    completedLessons: [],
                    currentLessonIndex: 0
                };
                const userDocRef = db.collection(`artifacts/${appId}/users`).doc(currentUser.uid);
                await userDocRef.set(profileData);

                // Update state and UI directly instead of re-fetching
                userProfile = profileData;
                document.getElementById('chat-header').textContent = `Welcome, ${userProfile.username}! (Class: ${userProfile.classId})`;
                document.getElementById('message-input').disabled = false;
                document.getElementById('send-button').disabled = false;
                document.getElementById('message-input-area').style.pointerEvents = 'auto';
                
                setupChatListener(); // Initialize chat with the new profile

                showCustomAlert('Profile saved successfully!');
                showSection('chat-section'); // Navigate to the main menu
            } catch (error) {
                console.error('Save profile error:', error);
                showCustomAlert('Failed to save profile.');
            }
        }

        // Chat Listener
        function setupChatListener() {
            if (!userProfile || !userProfile.classId) {
                console.warn("User profile or class ID not set. Cannot set up chat listener.");
                document.getElementById('messages-area').innerHTML = '<div class="loading-message">Please set your username and class to view chat messages.</div>';
                return;
            }

            // Using compat syntax for collection reference
            db.collection(`artifacts/${appId}/public/data/messages`)
                .where("classId", "==", userProfile.classId) // <-- ADD THIS LIN
                .orderBy('timestamp', 'asc')
                .onSnapshot(snapshot => {
                    const messagesArea = document.getElementById('messages-area');
                    messagesArea.innerHTML = ''; // Clear existing messages
                    if (snapshot.empty) {
                        messagesArea.innerHTML = '<div class="loading-message">No messages in this chat yet. Be the first to say hello!</div>';
                    }
                    snapshot.forEach(doc => {
                        const message = doc.data();
                        displayMessage(message);
                    });
                    messagesArea.scrollTop = messagesArea.scrollHeight; // Scroll to bottom
                }, error => {
                    console.error("Error listening to messages:", error);
                    messagesArea.innerHTML = `<div class="loading-message" style="color: red;">Error loading messages: ${error.message}</div>`;
                });
        }

        // Display Message
        function displayMessage(message) {
            const messagesArea = document.getElementById('messages-area');
            const messageElement = document.createElement('div');
            messageElement.classList.add('message-bubble');

            const isSentByCurrentUser = currentUser && message.senderId === currentUser.uid;
            if (isSentByCurrentUser) {
                messageElement.classList.add('sent');
            } else {
                messageElement.classList.add('received');
            }

            const senderDisplayName = message.username || 'Anonymous';
            const senderElement = document.createElement('div');
            senderElement.classList.add('message-sender');
            senderElement.textContent = senderDisplayName;
            messageElement.appendChild(senderElement);

            const textElement = document.createElement('div');
            textElement.textContent = message.text;
            messageElement.appendChild(textElement);

            messagesArea.appendChild(messageElement);
        }

        // Send Message
        async function sendMessage() {
            const messageInput = document.getElementById('message-input');
            const messageText = messageInput.value.trim();

            if (messageText === '' || !currentUser || !userProfile || !userProfile.username || !userProfile.classId) {
                showCustomAlert("Please set your username and class before sending messages.");
                return;
            }

            try {
                await db.collection(`artifacts/${appId}/public/data/messages`).add({
                    text: messageText,
                    senderId: currentUser.uid,
                    username: userProfile.username,
                    classId: userProfile.classId,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
                messageInput.value = '';
            } catch (error) {
                console.error("Error sending message:", error);
                showCustomAlert("Failed to send message. Please try again.");
            }
        }

        // Lessons Logic
        function loadCategories() {
            const container = document.getElementById('categories-container');
            container.innerHTML = '';
            const uniqueCategories = [...new Set(lessonsData.map(data => data.category))]; // Extract unique categories
            uniqueCategories.forEach(categoryName => {
                const btn = document.createElement('button');
                btn.classList.add('button-theme', 'category-button');
                btn.textContent = categoryName;
                btn.onclick = () => loadLessonsForCategory(categoryName); // Pass category name directly
                container.appendChild(btn);
            });
            document.getElementById('lessons-container').style.display = 'none';
            document.getElementById('categories-container').style.display = 'flex'; // Ensure categories are visible
            document.getElementById('back-to-categories-button').style.display = 'none';
        }

        function loadLessonsForCategory(categoryName) {
            currentCategory = categoryName; // <-- ADD THIS LINE to store the current category
            const categoryData = lessonsData.find(data => data.category === categoryName);
            if (!categoryData) {
                console.error("Category not found:", categoryName);
                return;
            }

            const lessonsContainer = document.getElementById('lessons-container');
            lessonsContainer.innerHTML = '';
            categoryData.lessons.forEach(lesson => {
                const btn = document.createElement('button');
                btn.classList.add('button-theme', 'lesson-button');
                const isCompleted = userProfile && userProfile.completedLessons && userProfile.completedLessons.includes(lesson.id);
                btn.textContent = `${lesson.title} ${isCompleted ? ' (Completed)' : ''}`;
                btn.onclick = () => loadLessonContent(lesson);
                lessonsContainer.appendChild(btn);
            });
            document.getElementById('categories-container').style.display = 'none';
            lessonsContainer.style.display = 'flex'; // Display lessons as flex
            document.getElementById('back-to-categories-button').style.display = 'block';
        }

        function loadLessonContent(lesson) {
            currentLesson = lesson; // Set current lesson
            showSection('lesson-content-section');
            document.getElementById('current-lesson-title').textContent = lesson.title;
            document.getElementById('current-lesson-content').innerHTML = lesson.content;

            const videoContainer = document.getElementById('lesson-video-container');
            const videoFrame = document.getElementById('lesson-video');
            if (lesson.videoUrl) {
                videoFrame.src = lesson.videoUrl;
                videoContainer.style.display = 'block';
            } else {
                videoFrame.src = '';
                videoContainer.style.display = 'none';
            }

            const takeQuizBtn = document.getElementById('take-quiz-button');
            const isCompleted = userProfile && userProfile.completedLessons && userProfile.completedLessons.includes(lesson.id);
            takeQuizBtn.disabled = isCompleted;
            takeQuizBtn.textContent = isCompleted ? 'Quiz Completed' : 'Take Quiz';
        }

        function startQuiz() {
            if (!currentLesson || !currentLesson.quiz) {
                showCustomAlert("No quiz available for this lesson.");
                return;
            }
            currentQuiz = currentLesson.quiz;
            showSection('quiz-section');
            document.getElementById('quiz-title').textContent = `Quiz: ${currentLesson.title}`;
            const quizQuestionsContainer = document.getElementById('quiz-questions-container');
            quizQuestionsContainer.innerHTML = '';

            const questionDiv = document.createElement('div');
            questionDiv.classList.add('quiz-question');
            questionDiv.innerHTML = `<p>${currentQuiz.question}</p>`;

            currentQuiz.options.forEach((option, index) => {
                const label = document.createElement('label');
                label.classList.add('quiz-option');
                const input = document.createElement('input');
                input.type = 'radio';
                input.name = 'quiz-answer';
                input.value = index;
                label.appendChild(input);
                label.appendChild(document.createTextNode(option));
                questionDiv.appendChild(label);
            });
            quizQuestionsContainer.appendChild(questionDiv);
            document.getElementById('submit-quiz-button').disabled = false;
        }

        async function submitQuiz() {
            const selectedOption = document.querySelector('input[name="quiz-answer"]:checked');
            if (!selectedOption) {
                showCustomAlert("Please select an answer.");
                return;
            }

            const userAnswer = parseInt(selectedOption.value);
            if (userAnswer === currentQuiz.correct) {
                showCustomAlert("Correct! You've passed this lesson.");
                document.getElementById('submit-quiz-button').disabled = true;

                if (userProfile && userProfile.completedLessons && !userProfile.completedLessons.includes(currentLesson.id)) {
                    userProfile.completedLessons.push(currentLesson.id);
                    await db.collection(`artifacts/${appId}/users`).doc(currentUser.uid).update({
                        completedLessons: userProfile.completedLessons
                    });
                }
                loadLessonsForCategory(currentCategory); // Refresh lessons list for the current category
                showSection('lessons-list-section');
            } else {
                showCustomAlert("Incorrect. Please try again.");
            }
        }


        // Rosary Logic
        function startRosary(mysteries) {
            rosaryState.currentMysteries = mysteries;
            rosaryState.currentMysteryIndex = 0;
            rosaryState.currentPrayerIndex = 0;
            rosaryState.prayers = getPrayersForMystery();
            displayCurrentRosaryPrayer();
            document.getElementById('rosary-next-button').style.display = 'block';
            document.getElementById('rosary-reset-button').style.display = 'block';
            showSection('rosary-section');
        }

        function displayCurrentRosaryPrayer() {
            if (rosaryState.currentMysteryIndex >= rosaryState.currentMysteries.length) {
                document.getElementById('current-mystery-title').textContent = "Rosary Completed!";
                document.getElementById('current-scripture').textContent = "";
                document.getElementById('current-prayer-text').textContent = "Praise be to God! You have completed the Rosary.";
                document.getElementById('rosary-next-button').style.display = 'none';
                showCustomAlert("Congratulations! You have completed the Holy Rosary.");
                return;
            }

            const mystery = rosaryState.currentMysteries[rosaryState.currentMysteryIndex];
            document.getElementById('current-mystery-title').textContent = `${rosaryState.currentMysteryIndex + 1}. ${mystery.title}`;
            document.getElementById('current-scripture').textContent = mystery.scripture;

            if (rosaryState.currentPrayerIndex < rosaryState.prayers.length) {
                const prayer = rosaryState.prayers[rosaryState.currentPrayerIndex];
                document.getElementById('current-prayer-text').textContent = `${prayer.type}: ${prayer.text}`;
            } else {
                // Move to the next mystery
                rosaryState.currentMysteryIndex++;
                rosaryState.currentPrayerIndex = 0; // Reset prayer index for the new mystery
                rosaryState.prayers = getPrayersForMystery(); // Re-populate prayers for the new mystery
                displayCurrentRosaryPrayer(); // Recurse to display the first prayer of the new mystery
            }
        }

        function nextRosaryPrayer() {
            rosaryState.currentPrayerIndex++;
            displayCurrentRosaryPrayer();
        }

        function resetRosary() {
            startRosary(rosaryState.currentMysteries);
            showCustomAlert("Rosary has been reset.");
        }

       // Event Listeners Initialization
        function initNavListeners() {
            document.getElementById('home-nav-button').addEventListener('click', () => {
                showSection('main-menu-section');
            });
            document.getElementById('lessons-nav-button').addEventListener('click', () => {
                showSection('lessons-list-section');
                loadCategories(); // Load categories when lessons button is clicked
            });
            document.getElementById('spiritual-nav-button').addEventListener('click', () => {
                showSection('spiritual-formation-section');
            });
             document.getElementById('chat-menu-button').addEventListener('click', () => {
                // Check if a profile exists before showing the chat section
                if (userProfile) {
                    showSection('chat-section');
                } else {
                    showCustomAlert("Please create a profile to use the chat feature.");
                    showSection('profile-setup');
                }
            });
            document.getElementById('resources-nav-button').addEventListener('click', () => {
                showSection('student-resources-section');
            });
            document.getElementById('quit-nav-button').addEventListener('click', () => {
                showCustomAlert("Thank you for using Illumined! You can close this window.");
            });

            // Lessons & Quiz Buttons
            document.getElementById('take-quiz-button').addEventListener('click', startQuiz);
            document.getElementById('back-to-lessons-list-button').addEventListener('click', () => {
                loadLessonsForCategory(currentCategory); // Use the stored category
                showSection('lessons-list-section');
            });
            document.getElementById('submit-quiz-button').addEventListener('click', submitQuiz);
            document.getElementById('back-to-lesson-from-quiz-button').addEventListener('click', () => {
                loadLessonContent(currentLesson); // Go back to the current lesson content
            });
            document.getElementById('back-to-categories-button').addEventListener('click', loadCategories);

            // Spiritual Formation Buttons
            document.getElementById('prayers-menu-button').addEventListener('click', () => {
                showSection('prayer-section');
            });
            document.getElementById('examination-menu-button').addEventListener('click', () => {
                showSection('examination-section');
            });
            document.getElementById('practices-menu-button').addEventListener('click', () => {
                showSection('practices-section');
            });
            document.getElementById('spiritual-main-menu-button').addEventListener('click', () => {
                showSection('main-menu-section');
            });

            // Back buttons for new spiritual sections
            document.getElementById('prayers-back-to-spiritual-button').addEventListener('click', () => {
                showSection('spiritual-formation-section');
            });
            document.getElementById('examination-back-to-spiritual-button').addEventListener('click', () => {
                showSection('spiritual-formation-section');
            });
            document.getElementById('practices-back-to-spiritual-button').addEventListener('click', () => {
                showSection('spiritual-formation-section');
            });

            // Spiritual Practices Sub-Menu Buttons
            document.getElementById('works-of-mercy-button').addEventListener('click', () => {
                showSection("works-of-mercy-section");
            });
            document.getElementById('precepts-of-church-button').addEventListener('click', () => {
                showSection("precepts-of-church-section");
            });
            document.getElementById('penitential-practices-button').addEventListener('click', () => {
                showSection("penitential-practices-section");
            });
            document.getElementById('habit-building-button').addEventListener('click', () => {
                showSection("habit-building-section");
            });
            document.getElementById('social-teachings-button').addEventListener('click', () => {
                showSection("social-teachings-section");
            });
            document.getElementById('liturgical-living-button').addEventListener('click', () => {
                showSection("liturgical-living-section");
            });

            // Back buttons for Spiritual Practices placeholders
             document.getElementById('mercy-back-to-practices-button').addEventListener('click', () => showSection('practices-section'));
            document.getElementById('precepts-back-to-practices-button').addEventListener('click', () => showSection('practices-section'));
            document.getElementById('penitential-back-to-practices-button').addEventListener('click', () => showSection('practices-section'));
            document.getElementById('virtue-back-to-practices-button').addEventListener('click', () => showSection('practices-section'));
            document.getElementById('social-back-to-practices-button').addEventListener('click', () => showSection('practices-section'));
            document.getElementById('liturgical-back-to-practices-button').addEventListener('click', () => showSection('practices-section'));
       // Prayer Sub-Menu Buttons
            document.getElementById('lectio-divina-button').addEventListener('click', () => {
                showCustomAlert("Lectio Divina functionality coming soon!");
            });
            document.getElementById('guided-rosary-button').addEventListener('click', () => {
                showSection('rosary-mysteries-section');
            });
            document.getElementById('common-prayers-button').addEventListener('click', () => {
                showCustomAlert("Common Prayers functionality coming soon!");
            });
            document.getElementById('liturgy-hours-button').addEventListener('click', () => {
                showCustomAlert("Liturgy of the Hours functionality coming soon!");
            });

            // Rosary Buttons
            document.getElementById('joyful-mysteries-button').addEventListener('click', () => startRosary(joyfulMysteries));
            document.getElementById('luminous-mysteries-button').addEventListener('click', () => startRosary(luminousMysteries));
            document.getElementById('sorrowful-mysteries-button').addEventListener('click', () => startRosary(sorrowfulMysteries));
            document.getElementById('glorious-mysteries-button').addEventListener('click', () => startRosary(gloriousMysteries));
            document.getElementById('mysteries-back-to-spiritual-button').addEventListener('click', () => {
                showSection('prayer-section');
            });
            document.getElementById('rosary-next-button').addEventListener('click', nextRosaryPrayer);
            document.getElementById('rosary-reset-button').addEventListener('click', resetRosary);
            document.getElementById('rosary-back-to-mysteries-button').addEventListener('click', () => {
                showSection('rosary-mysteries-section');
            });

            // Chat Buttons/Inputs
            document.getElementById('save-profile-button').addEventListener('click', saveProfile);
            document.getElementById('message-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            document.getElementById('send-button').addEventListener('click', sendMessage);
            document.getElementById('close-chat-button').addEventListener('click', () => {
                showSection('main-menu-section');
            });
        }
        // Initialize on DOMContentLoaded
      window.addEventListener('DOMContentLoaded', () => {
            // Main content container is now immediately visible
            document.querySelector('.main-content-container').style.display = 'flex';
            document.querySelector('.main-content-container').style.opacity = '1';

            initializeAuth(); // Start Firebase auth process
            auth.onAuthStateChanged(user => {
                if (user) {
                    currentUser = user;
                    loadUserProfile(); // Load user profile once authenticated
                } else {
                    currentUser = null;
                    userProfile = null;
                    // When not authenticated, if user tries to go to chat, they will see the profile setup.
                    document.getElementById('message-input').disabled = true;
                    document.getElementById('send-button').disabled = true;
                    document.getElementById('messages-area').innerHTML = '<div class="loading-message">Please sign in to use chat.</div>';
                }
            });
            initNavListeners(); // Initialize all event listeners
            showSection('main-menu-section'); // Show initial section immediately
        });
    </script>
</body>
</html>
